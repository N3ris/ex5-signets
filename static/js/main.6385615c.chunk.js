(this["webpackJsonpex5-signets"]=this["webpackJsonpex5-signets"]||[]).push([[0],{166:function(e,t,r){},167:function(e,t,r){},168:function(e,t,r){},184:function(e,t,r){},185:function(e,t,r){},188:function(e,t,r){},295:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(14),i=r.n(c),s=(r(166),r(36)),o=r(25),u=r(17),l=(r(167),r(168),r(352)),d=r(332),j=r(9),b=r(137),p=(r(297),r(107),{apiKey:"AIzaSyCHiSTo91xv4uhT04DozK_9hcLNs9QEgKE",authDomain:"exercice-5.firebaseapp.com",projectId:"exercice-5",storageBucket:"exercice-5.appspot.com",messagingSenderId:"1084937730315",appId:"1:1084937730315:web:38482a5aac7ee18ae8ca0e",measurementId:"G-GQ2V9ZZBW6"}),m="utilisateurs-ex5",f="dossiers";j.a.apps.length||j.a.initializeApp(p);var h=j.a.auth(),O=new b.a.AuthUI(h),x=j.a.firestore();r(177);function g(e){h.onAuthStateChanged((function(t){var r,n,a;e(t),t&&(r=t.uid,n=t.displayName,a=t.email,x.collection(m).doc(r).set({nom:n,courriel:a,datecompte:j.a.firestore.FieldValue.serverTimestamp()},{merge:!0}))}))}var v=r(7);function N(e){var t=e.utilisateur;return Object(v.jsxs)("header",{className:"Entete",children:[Object(v.jsxs)("div",{className:"logo",children:["Signets",Object(v.jsx)(d.a,{variant:"outlined",size:"small",className:"btn-deconnexion",onClick:function(){h.signOut()},children:"D\xe9connexion"})]}),Object(v.jsxs)("div",{className:"utilisateur",children:[t.displayName," ",Object(v.jsx)(l.a,{className:"avatar",alt:t.displayName,src:t.photoURL})]})]})}var D=r(27),y=r.n(D),C=r(47),k=(r(184),r(185),r(336)),A=r(148),S=r(348),w=r(140),I=r.n(w),E=r(141),F=r.n(E),B=r.p+"static/media/couverture.2dc9ece9.webp";function V(e){var t=e.id,r=e.nom,a=e.couleur,c=e.datemodif,i=e.couverture,s=e.gererSupprimer,o=Object(n.useState)(null),l=Object(u.a)(o,2),d=l[0],j=l[1];function b(){j(null)}return Object(v.jsxs)("article",{className:"Dossier",style:{backgroundColor:a},children:[Object(v.jsxs)("div",{className:"couverture",children:[Object(v.jsx)(k.a,{className:"deplacer","aria-label":"d\xe9placer",disableRipple:!0,children:Object(v.jsx)(I.a,{})}),Object(v.jsx)("img",{src:i||B,alt:r})]}),Object(v.jsxs)("div",{className:"info",children:[Object(v.jsx)("h2",{children:r}),Object(v.jsxs)("p",{children:["Modifi\xe9 : ",R(c)]})]}),Object(v.jsx)(k.a,{id:t,className:"modifier","aria-label":"modifier",size:"small","aria-haspopup":"true","aria-controls":"maj-dossier",onClick:function(e){j(e.currentTarget)},children:Object(v.jsx)(F.a,{})}),Object(v.jsxs)(A.a,{id:"maj-dossier",anchorEl:d,keepMounted:!0,open:Boolean(d),onClose:b,children:[Object(v.jsx)(S.a,{onClick:b,children:"Modifier"}),Object(v.jsx)(S.a,{onClick:function(){s(t),b()},children:"Supprimer"})]})]})}function R(e){var t=e?new Date(1e3*e.seconds):new Date;return"".concat(t.getDate()," ").concat(["janvier","f\xe9vrier","mars","avril","mai","juin","juillet","ao\xfbt","septembre","octobre","novembre","d\xe9cembre"][t.getMonth()]," ").concat(t.getFullYear())}function z(){return(z=Object(C.a)(y.a.mark((function e(t,r){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.datemodif=j.a.firestore.FieldValue.serverTimestamp(),e.next=3,x.collection(m).doc(t).collection(f).add(r);case 3:return n=e.sent,e.abrupt("return",n.get());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(C.a)(y.a.mark((function e(t,r){var n,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],a=[{propriete:"datemodif",ordre:"desc"},{propriete:"nom",ordre:"asc"},{propriete:"nom",ordre:"desc"}],e.next=4,x.collection(m).doc(t).collection(f).orderBy(a[r].propriete,a[r].ordre).get();case 4:return e.sent.forEach((function(e){n.push(Object(s.a)({id:e.id},e.data()))})),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e,t){return M.apply(this,arguments)}function M(){return(M=Object(C.a)(y.a.mark((function e(t,r){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.collection(m).doc(t).collection(f).doc(r).delete();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var W=r(338),G=r(349),_=r(339),K=r(346),L=Object(W.a)((function(e){return{button:{display:"block",marginTop:e.spacing(2)},formControl:{margin:e.spacing(1),minWidth:120}}}));function J(e){var t=e.utilisateur,r=e.etatDossiers,a=e.trierDossiers,c=L(),i=Object(u.a)(r,2),l=i[0],d=i[1],j=Object(u.a)(a,2),b=j[0],p=j[1];function m(e){return f.apply(this,arguments)}function f(){return(f=Object(C.a)(y.a.mark((function e(r){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T(t.uid,r).then((function(){var e=Object(o.a)(l).filter((function(e){return e.id!==r}));d(e)})).catch((function(e){return console.log("\xc9chec de la suppression - Firestore a r\xe9pondu :",e.message)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){(function(e,t){return P.apply(this,arguments)})(t.uid,b).then((function(e){return d(e)}))}),[b]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{children:Object(v.jsxs)(_.a,{className:c.formControl,children:[Object(v.jsx)(G.a,{id:"demo-controlled-open-select-label",children:" trier l\u2019affichage"}),Object(v.jsxs)(K.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:b,defaultValue:0,onChange:function(e){return p(e.target.value)},children:[Object(v.jsx)(S.a,{value:0,children:"Date de modification descendante"}),Object(v.jsx)(S.a,{value:1,children:"Nom de dossier ascendant"}),Object(v.jsx)(S.a,{value:2,children:"Nom de dossier descendant"})]})]})}),Object(v.jsx)("ul",{className:"ListeDossiers",children:l.length>0?l.map((function(e){return Object(v.jsx)("li",{children:Object(v.jsx)(V,Object(s.a)(Object(s.a)({},e),{},{gererSupprimer:m}))},e.id)})):Object(v.jsxs)("li",{className:"msgAucunDossier",children:["Votre liste de dossiers est vide",Object(v.jsx)("p",{children:";-("})]})})]})}var Q=r(344),U=r(146),Z=r.n(U);r(188);function q(){return Object(n.useEffect)((function(){return e="#firebaseui-widget",void O.start(e,{signInOptions:[j.a.auth.GoogleAuthProvider.PROVIDER_ID,j.a.auth.FacebookAuthProvider.PROVIDER_ID,j.a.auth.GithubAuthProvider.PROVIDER_ID],signInFlow:"popup"});var e}),[]),Object(v.jsxs)("div",{className:"Accueil",children:[Object(v.jsxs)("h3",{className:"logo",children:["Signets ",Object(v.jsx)("span",{children:"beta"})]}),Object(v.jsxs)("h2",{className:"amorce",children:["Organisez vos signets Web, ",Object(v.jsx)("br",{}),"Simple comme bonjour !"]}),Object(v.jsx)("h4",{className:"connexion-etiquette",children:"Connexion \xe0 Signets"}),Object(v.jsx)("div",{id:"firebaseui-widget"})]})}var H=r(351),Y=r(347),X=r(343),$=r(342),ee=r(350),te=r(147);function re(e){var t=e.ouvert,r=e.setOuvert,a=e.gererAjout,c=Object(n.useState)(""),i=Object(u.a)(c,2),s=i[0],o=i[1],l=Object(n.useState)(""),j=Object(u.a)(l,2),b=j[0],p=j[1],m=Object(n.useState)("#537169"),f=Object(u.a)(m,2),h=f[0],O=f[1];function x(){o(""),p(""),O("#537169")}return Object(v.jsx)("div",{className:"AjouterDossier",children:Object(v.jsxs)(Y.a,{open:t,onClose:function(){return r(!1)},"aria-labelledby":"form-dialog-title",children:[Object(v.jsx)(ee.a,{id:"form-dialog-title",children:"Ajouter un dossier"}),Object(v.jsxs)($.a,{children:[Object(v.jsx)(H.a,{autoFocus:!0,margin:"dense",id:"nomDossier",label:"Nom du dossier",type:"text",fullWidth:!0,onChange:function(e){return o(e.target.value)},defaultValue:s}),Object(v.jsx)(H.a,{margin:"normal",id:"urlImage",label:"Adresse de l'image de couverture",type:"text",fullWidth:!0,onChange:function(e){return p(e.target.value)},defaultValue:b}),Object(v.jsx)(te.a,{width:"100%",triangle:"hide",colors:["#537169","#55BBB2","#F6D2A3","#F3D379","#FB7778","#5990B8"],onChangeComplete:function(e,t){return O(e.hex)},color:h})]}),Object(v.jsxs)(X.a,{children:[Object(v.jsx)(d.a,{style:{backgroundColor:"#900",color:"#fff",margin:"15px 0"},onClick:function(){r(!1),x()},variant:"contained",children:"Annuler"}),Object(v.jsx)(d.a,{style:{backgroundColor:"#090",color:"#fff",margin:"15px"},className:"btnAjouter",onClick:function(){""!==s&&a(s,b,h),x()},variant:"contained",children:"Ajouter"})]})]})})}function ne(){var e=Object(n.useState)(null),t=Object(u.a)(e,2),r=t[0],a=t[1],c=Object(n.useState)(0),i=Object(n.useState)([]),l=Object(u.a)(i,2),d=l[0],j=l[1],b=Object(n.useState)(!1),p=Object(u.a)(b,2),m=p[0],f=p[1];return Object(n.useEffect)((function(){return g(a)}),[]),Object(v.jsx)("div",{className:"Appli",children:r?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(N,{utilisateur:r}),Object(v.jsxs)("section",{className:"contenu-principal",children:[Object(v.jsx)(J,{utilisateur:r,etatDossiers:i,trierDossiers:c}),Object(v.jsx)(re,{ouvert:m,setOuvert:f,gererAjout:function(e,t,n){var a={nom:e,couverture:t,couleur:n,signets:[]};(function(e,t){return z.apply(this,arguments)})(r.uid,a).then((function(e){return j([].concat(Object(o.a)(d),[Object(s.a)(Object(s.a)({},e.data()),{},{id:e.id})]))})),f(!1)}}),Object(v.jsx)(Q.a,{onClick:function(){return f(!0)},className:"ajoutRessource",color:"primary","aria-label":"Ajouter dossier",children:Object(v.jsx)(Z.a,{})})]})]}):Object(v.jsx)(q,{})})}i.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(ne,{})}),document.getElementById("racine"))}},[[295,1,2]]]);